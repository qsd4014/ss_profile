# Shadowrocket Configuration
# 基于clash.ini优化，专为iOS平台设计
# 更新时间: 2025-09-29
# 保持与clash.ini一致的分流逻辑和高倍流量过滤

[General]
# ==== 基础网络设置 ====
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32

# ==== DNS防泄漏配置 ====
dns-server = 223.5.5.5,114.114.114.114,8.8.8.8,1.1.1.1
fallback-dns-server = system
hijack-dns = 8.8.8.8:53,8.8.4.4:53,1.1.1.1:53,1.0.0.1:53
dns-fallback-system = false
dns-direct-system = false
dns-direct-fallback-proxy = true

# ==== 网络优化设置 ====
ipv6 = true
prefer-ipv6 = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true
update-url = https://raw.githubusercontent.com/qsd4014/ss_profile/main/shadowrocket.conf

# ==== 性能优化 ====
test-timeout = 3
fast-switch = true

[Proxy Group]
# ==== 主要策略组 ====
# 对应clash.ini的🚀 节点选择
Proxy = select,Auto,Low-Rate,Public-Welfare,Manual-Select,Manual-Select-Backup,Self-Built,Fallback,Load-Balance,Hong-Kong,Taiwan,Singapore,Japan,United-States,Korea,DIRECT

# ==== 手动选择组 ====
# 对应clash.ini的✈️ 手动选择和🛩️ 手动选择备用
Manual-Select = select,policy-regex-filter=.*
Manual-Select-Backup = select,policy-regex-filter=.*

# ==== 地区节点组（屏蔽高倍流量节点）====
# 使用正则过滤大于1X的所有倍数节点
Hong-Kong = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)香港|港|HK|Hong.?Kong).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

Taiwan = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)台|台湾|新北|彰化|TW|Taiwan).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

Singapore = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)新加坡|坡|狮城|SG|Singapore).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

Japan = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)日本|川日|东京|大阪|泉日|埼玉|沪日|深日|[^-]日|JP|Japan).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

United-States = select,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)美|美国|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United.?States|usa).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=150

Korea = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)KR|Korea|KOR|首尔|韩|韓).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

# ==== 特殊节点组 ====
# 对应clash.ini的0.X分组，低倍流量线路
Low-Rate = select,policy-regex-filter=^(?=.*((?i)0\\.[0-9]+|直连|下载|download))(?!.*(([2-9]|[1-9][0-9]+)X|HOME)).*$

# 对应clash.ini的🆓 公益
Public-Welfare = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)Hax|hax|VC|Vc|vc|buyvm|BuyVM|BUYVM|鸡|Woiden|woiden|Euserv|Optimization|Akari|FREE|Oracle|oracle|Vult|advins|CF).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

# 对应clash.ini的🚁 自建节点
Self-Built = select,policy-regex-filter=((?i)自建|Oracle|oracle)

# 对应clash.ini的♻️ 自动选择（屏蔽高倍流量）
Auto = url-test,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

# 对应clash.ini的🔯 故障转移（屏蔽高倍流量）
Fallback = fallback,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*$,url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

# 对应clash.ini的🔮 负载均衡
Load-Balance = load-balance,policy-regex-filter=((?i)自建|Oracle|oracle),url=http://www.gstatic.com/generate_204,interval=300,tolerance=50

# ==== AI服务策略组 ====
# 对应clash.ini的🌍 OpenAI和CleanIP
OpenAI = select,United-States,Singapore,Japan,Manual-Select,policy-regex-filter=.*
CleanIP = select,United-States,Singapore,Manual-Select,policy-regex-filter=.*

# ==== 流媒体策略组 ====
# 对应clash.ini的📹 油管视频
YouTube = select,Public-Welfare,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,Auto,Singapore,Hong-Kong,Taiwan,Japan,United-States,Korea,DIRECT

# 对应clash.ini的🎥 奈飞视频（只包含大区域节点）
Netflix = select,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)新加坡|坡|狮城|SG|Singapore|美|美国|US|us|香港|港|HK|Hong.?Kong|台|台湾|TW|Taiwan).*$

# 对应clash.ini的🐹 DisneyPlus
DisneyPlus = select,policy-regex-filter=^(?!.*(电信|联通|移动|四川|广西|([2-9]|[1-9][0-9]+)X|HOME)).*((?i)新加坡|坡|狮城|SG|Singapore|美|美国|US|us|香港|港|HK|Hong.?Kong|台|台湾|TW|Taiwan).*$

# 对应clash.ini的🎦 HBO
HBO = select,United-States,Manual-Select,Manual-Select-Backup,Self-Built

# 对应clash.ini的🎦 PrimeVideo
PrimeVideo = select,United-States,Manual-Select,Manual-Select-Backup,Self-Built

# 对应clash.ini的🍎 AppleTV
AppleTV = select,DIRECT,Manual-Select,Manual-Select-Backup,Self-Built

# ==== EMBY服务 ====
# 对应clash.ini的🎬 EMBY_proxy和EMBY_direct
EMBY-Proxy = select,Public-Welfare,Low-Rate,Self-Built,Load-Balance,DIRECT,Proxy,Manual-Select,Manual-Select-Backup
EMBY-Direct = select,DIRECT,Public-Welfare,Low-Rate,Self-Built,Proxy,Manual-Select,Manual-Select-Backup

# ==== 通讯服务 ====
# 对应clash.ini的📲 电报消息
Telegram = select,Proxy,Auto,Manual-Select,Manual-Select-Backup,Self-Built,Singapore,Hong-Kong,Taiwan,Japan,United-States,Korea,DIRECT

# ==== 科技服务 ====
# 对应clash.ini的谷歌系列
Google = select,United-States,Manual-Select,Manual-Select-Backup,Self-Built,Hong-Kong,Taiwan,Singapore,Japan,Korea
GoogleFCM = select,DIRECT,Manual-Select,Manual-Select-Backup,Self-Built,United-States,Hong-Kong,Taiwan,Singapore,Japan,Korea

# 对应clash.ini的微软系列
Bing = select,United-States,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,Hong-Kong,Taiwan,Singapore,Japan,Korea
OneDrive = select,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,United-States,Hong-Kong,Taiwan,Singapore,Japan,Korea
Microsoft = select,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,United-States,Hong-Kong,Taiwan,Singapore,Japan,Korea

# 对应clash.ini的🍎 苹果服务
Apple = select,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,United-States,Hong-Kong,Taiwan,Singapore,Japan,Korea

# ==== 娱乐服务 ====
# 对应clash.ini的🎮 游戏平台
Gaming = select,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,United-States,Hong-Kong,Taiwan,Singapore,Japan,Korea

# 对应clash.ini的📺 哔哩哔哩
Bilibili = select,Global-Direct,Taiwan,Hong-Kong

# ==== 媒体分类 ====
# 对应clash.ini的🌍 国外媒体
GlobalMedia = select,Proxy,Auto,Manual-Select,Manual-Select-Backup,Self-Built,Hong-Kong,Taiwan,Singapore,Japan,United-States,Korea,DIRECT

# 对应clash.ini的🌏 国内媒体
DomesticMedia = select,DIRECT,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,Hong-Kong,Taiwan,Singapore,Japan

# ==== 系统策略组 ====
# 对应clash.ini的🎯 全球直连
Global-Direct = select,DIRECT,Auto

# 对应clash.ini的🛑 广告拦截和🍃 应用净化
Ad-Block = select,REJECT,DIRECT
App-Purify = select,REJECT,DIRECT

# 对应clash.ini的🐟 漏网之鱼
Final = select,Proxy,Manual-Select,Manual-Select-Backup,Self-Built,Auto,DIRECT,Hong-Kong,Taiwan,Singapore,Japan,United-States,Korea

[Rule]
# ==== 局域网直连 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list,Global-Direct
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,Global-Direct

# ==== 广告拦截 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list,Ad-Block
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list,App-Purify

# ==== AI服务 ====
RULE-SET,https://raw.githubusercontent.com/qsd4014/ss_profile/main/Rules/openAI.list,OpenAI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list,OpenAI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.list,OpenAI
RULE-SET,https://raw.githubusercontent.com/qsd4014/ss_profile/refs/heads/main/Rules/CleanIP.list,CleanIP

# ==== 流媒体服务 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list,YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list,Netflix
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AmazonIp.list,Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list,DisneyPlus
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBO/HBO.list,HBO
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOUSA/HBOUSA.list,HBO
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AmazonPrimeVideo/AmazonPrimeVideo.list,PrimeVideo
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AppleTV/AppleTV.list,AppleTV

# ==== 谷歌服务 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list,GoogleFCM
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list,Google

# ==== 国内谷歌服务直连 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list,Global-Direct
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list,Global-Direct

# ==== 微软服务 ====
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.list,Bing
RULE-SET,https://raw.githubusercontent.com/ender-zhao/Clash-for-Windows_Rule/main/Rule/Bing,Bing
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list,OneDrive
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list,Microsoft

# ==== 苹果服务 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list,Apple

# ==== 电报 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list,Telegram

# ==== 游戏平台 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list,Gaming
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list,Gaming
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list,Gaming
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list,Gaming

# ==== EMBY服务 ====
RULE-SET,https://raw.githubusercontent.com/qsd4014/ss_profile/main/Rules/Emby_proxy.list,EMBY-Proxy
RULE-SET,https://raw.githubusercontent.com/qsd4014/ss_profile/main/Rules/Emby_direct.list,EMBY-Direct

# ==== 哔哩哔哩 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list,Bilibili
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list,Bilibili

# ==== 国内外媒体 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list,DomesticMedia
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list,GlobalMedia

# ==== 代理规则 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list,Proxy

# ==== 直连规则 ====
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list,Global-Direct
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,Global-Direct
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list,Global-Direct
RULE-SET,https://raw.githubusercontent.com/qsd4014/ss_profile/main/Rules/Custom_direct.list,Global-Direct

# ==== 地理位置规则 ====
GEOIP,CN,Global-Direct
FINAL,Final

[Host]
localhost = 127.0.0.1

[URL Rewrite]
# ==== Google搜索重定向 ====
^https?://(www\.)?g\.cn https://www.google.com 302
^https?://(www\.)?google\.cn https://www.google.com 302

# ==== 移除部分应用的广告 ====
^https?://m\.douban\.com/movie/subject/.+\?seen=\d+ https://m.douban.com/movie/subject/$1 302

[Script]
# 可以在这里添加脚本规则
# 例如：签到脚本、重写脚本等

[MITM]
# ==== HTTPS解密配置 ====
enable = false
hostname = 
ca-passphrase = 
ca-p12 = 

# ==== 配置说明 ====
# 1. 本配置基于clash.ini转换，保持分流规则逻辑一致
# 2. 专为iOS平台Shadowrocket优化，支持所有功能
# 3. 屏蔽高倍流量节点（大于1X的所有倍数）
# 4. 支持低倍流量线路优选（0.*X、直连、下载等）
# 5. 集成iOS最佳实践：DNS优化、网络加速、智能分流
# 6. 支持一键更新，保持配置最新状态